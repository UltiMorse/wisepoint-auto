# wisepoint-auto
多要素認証のWisePointを自動化。信州大学のACSU用　TamperMonkeyのユーザースクリプト

# WisePointイメージ認証 自動化仕様

---

## 1. 画像マトリクスの構造

- 5×5のマス（合計25マス）が画面上に表示される。
- 各マスは `<div class="input_imgdiv_class" id="buttonN" ...>` で表現されている（Nは0〜24）。
- 各マスの画像は、divの `style="background-image:url('/idp/tenant/0/images/imatrix/iXX.gif')"` で指定されている。

---

## 2. 画像ファイルとアルファベットの対応

- 画像ファイル名は `i1.gif` 〜 `i25.gif`。
- アルファベットとの対応は以下の通り（Qは存在しない）：

| 画像ファイル | アルファベット |
|:------------:|:-------------:|
| i1.gif       | A             |
| i2.gif       | B             |
| ...          | ...           |
| i16.gif      | P             |
| i17.gif      | R             |
| ...          | ...           |
| i25.gif      | Z             |

※ Q（i17.gif）は存在せず、R以降は1つずつズレる。

---

## 3. 配置の仕組み

- 画像（アルファベット）の配置は毎回ランダムに決定される。
- どのマスにどのアルファベットが表示されるかは、各divの `background-image` のファイル名（iXX.gif）で判別できる。
- 画面上の見た目や座標は関係なく、ファイル名からアルファベットを特定する。

---

## 4. 自動化の流れ

1. 5×5マスの各divから `background-image` のファイル名を取得。
2. ファイル名からアルファベットを判定（Qはスキップ）。
3. ユーザーが設定した順番（例：A→B→C→D）で該当するマスをクリック。
4. 4つ選択後、「ログイン」ボタン（`input#btnLogin`）をクリック。

---

## 5. 注意点

- 画像の配置は毎回変わるため、座標やid順ではなく「ファイル名→アルファベット」で判定する必要がある。
- Qは出現しない。
- 諸々のセキュリティ問題やその他問題があるので、実用を目的としたものではないことをご理解ください。
---
